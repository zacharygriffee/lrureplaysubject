function e(e){return"function"==typeof e}function t(e){const t=e((e=>{Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const s=t((e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map(((e,t)=>`${t+1}) ${e.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t}));function r(e,t){if(e){const s=e.indexOf(t);0<=s&&e.splice(s,1)}}class i{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(const e of r)e.remove(this);else r.remove(this);const{initialTeardown:i}=this;if(e(i))try{i()}catch(e){t=e instanceof s?e.errors:[e]}const{_finalizers:n}=this;if(n){this._finalizers=null;for(const e of n)try{c(e)}catch(e){t=null!=t?t:[],e instanceof s?t=[...t,...e.errors]:t.push(e)}}if(t)throw new s(t)}}add(e){var t;if(e&&e!==this)if(this.closed)c(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&r(t,e)}remove(e){const{_finalizers:t}=this;t&&r(t,e),e instanceof i&&e._removeParent(this)}}i.EMPTY=(()=>{const e=new i;return e.closed=!0,e})();const n=i.EMPTY;function o(t){return t instanceof i||t&&"closed"in t&&e(t.remove)&&e(t.add)&&e(t.unsubscribe)}function c(t){e(t)?t():t.unsubscribe()}const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},u={setTimeout(e,t,...s){const{delegate:r}=u;return(null==r?void 0:r.setTimeout)?r.setTimeout(e,t,...s):setTimeout(e,t,...s)},clearTimeout(e){const{delegate:t}=u;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function l(e){u.setTimeout((()=>{const{onUnhandledError:t}=h;if(!t)throw e;t(e)}))}function a(){}const d=f("C",void 0,void 0);function f(e,t,s){return{kind:e,value:t,error:s}}function p(e){e()}class m extends i{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,o(e)&&e.add(this)):this.destination=I}static create(e,t,s){return new x(e,t,s)}next(e){this.isStopped?w(function(e){return f("N",e,void 0)}(e),this):this._next(e)}error(e){this.isStopped?w(f("E",void 0,e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?w(d,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const v=Function.prototype.bind;function b(e,t){return v.call(e,t)}class y{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(e){g(e)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(e){g(e)}else g(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(e){g(e)}}}class x extends m{constructor(t,s,r){let i;if(super(),e(t)||!t)i={next:null!=t?t:void 0,error:null!=s?s:void 0,complete:null!=r?r:void 0};else{let e;this&&h.useDeprecatedNextContext?(e=Object.create(t),e.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&b(t.next,e),error:t.error&&b(t.error,e),complete:t.complete&&b(t.complete,e)}):i=t}this.destination=new y(i)}}function g(e){l(e)}function w(e,t){const{onStoppedNotification:s}=h;s&&u.setTimeout((()=>s(e,t)))}const I={closed:!0,next:a,error:function(e){throw e},complete:a},_="function"==typeof Symbol&&Symbol.observable||"@@observable";function E(e){return e}class S{constructor(e){e&&(this._subscribe=e)}lift(e){const t=new S;return t.source=this,t.operator=e,t}subscribe(t,s,r){const i=(n=t)&&n instanceof m||function(t){return t&&e(t.next)&&e(t.error)&&e(t.complete)}(n)&&o(n)?t:new x(t,s,r);var n;return p((()=>{const{operator:e,source:t}=this;i.add(e?e.call(i,t):t?this._subscribe(i):this._trySubscribe(i))})),i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){e.error(t)}}forEach(e,t){return new(t=A(t))(((t,s)=>{const r=new x({next:t=>{try{e(t)}catch(e){s(e),r.unsubscribe()}},error:s,complete:t});this.subscribe(r)}))}_subscribe(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)}[_](){return this}pipe(...e){return(0===(t=e).length?E:1===t.length?t[0]:function(e){return t.reduce(((e,t)=>t(e)),e)})(this);var t}toPromise(e){return new(e=A(e))(((e,t)=>{let s;this.subscribe((e=>s=e),(e=>t(e)),(()=>e(s)))}))}}function A(e){var t;return null!==(t=null!=e?e:h.Promise)&&void 0!==t?t:Promise}S.create=e=>new S(e);const T={schedule(e){let t=requestAnimationFrame,s=cancelAnimationFrame;const{delegate:r}=T;r&&(t=r.requestAnimationFrame,s=r.cancelAnimationFrame);const n=t((t=>{s=void 0,e(t)}));return new i((()=>null==s?void 0:s(n)))},requestAnimationFrame(...e){const{delegate:t}=T;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){const{delegate:t}=T;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...e)},delegate:void 0},z=t((e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}));class C extends S{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const t=new O(this,this);return t.operator=e,t}_throwIfClosed(){if(this.closed)throw new z}next(e){p((()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const t of this.currentObservers)t.next(e)}}))}error(e){p((()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:t}=this;for(;t.length;)t.shift().error(e)}}))}complete(){p((()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}}))}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:t,isStopped:s,observers:o}=this;return t||s?n:(this.currentObservers=null,o.push(e),new i((()=>{this.currentObservers=null,r(o,e)})))}_checkFinalizedStatuses(e){const{hasError:t,thrownError:s,isStopped:r}=this;t?e.error(s):r&&e.complete()}asObservable(){const e=new S;return e.source=this,e}}C.create=(e,t)=>new O(e,t);class O extends C{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,s;null===(s=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===s||s.call(t,e)}error(e){var t,s;null===(s=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===s||s.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,s;return null!==(s=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==s?s:n}}const P={now:()=>Date.now(),delegate:void 0};class F extends i{constructor(e,t){super()}schedule(e,t=0){return this}}const k={setInterval(e,t,...s){const{delegate:r}=k;return(null==r?void 0:r.setInterval)?r.setInterval(e,t,...s):setInterval(e,t,...s)},clearInterval(e){const{delegate:t}=k;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0};class N extends F{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var s;if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,s=0){return k.setInterval(e.flush.bind(e,this),s)}recycleAsyncId(e,t,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return t;null!=t&&k.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(e,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(e){r=!0,s=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:s}=t;this.work=this.state=this.scheduler=null,this.pending=!1,r(s,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}let q,M=1;const j={};function D(e){return e in j&&(delete j[e],!0)}const R={setImmediate(e){const t=M++;return j[t]=!0,q||(q=Promise.resolve()),q.then((()=>D(t)&&e())),t},clearImmediate(e){D(e)}},{setImmediate:Y,clearImmediate:V}=R,$={setImmediate(...e){const{delegate:t}=$;return((null==t?void 0:t.setImmediate)||Y)(...e)},clearImmediate(e){const{delegate:t}=$;return((null==t?void 0:t.clearImmediate)||V)(e)},delegate:void 0};class U{constructor(e,t=U.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,s){return new this.schedulerActionCtor(this,e).schedule(s,t)}}U.now=P.now;class L extends U{constructor(e,t=U.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let s;this._active=!0;do{if(s=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,s){for(;e=t.shift();)e.unsubscribe();throw s}}}new class extends L{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:s}=this;let r;e=e||s.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=s[0])&&e.id===t&&s.shift());if(this._active=!1,r){for(;(e=s[0])&&e.id===t&&s.shift();)e.unsubscribe();throw r}}}(class extends N{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,s=0){return null!==s&&s>0?super.requestAsyncId(e,t,s):(e.actions.push(this),e._scheduled||(e._scheduled=$.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,s=0){var r;if(null!=s?s>0:this.delay>0)return super.recycleAsyncId(e,t,s);const{actions:i}=e;null!=t&&(null===(r=i[i.length-1])||void 0===r?void 0:r.id)!==t&&($.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}}),new L(N);new class extends L{}(class extends N{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,s=0){return null!=s&&s>0||null==s&&this.delay>0?super.requestAsyncId(e,t,s):(e.flush(this),0)}});new class extends L{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:s}=this;let r;e=e||s.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=s[0])&&e.id===t&&s.shift());if(this._active=!1,r){for(;(e=s[0])&&e.id===t&&s.shift();)e.unsubscribe();throw r}}}(class extends N{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,s=0){return null!==s&&s>0?super.requestAsyncId(e,t,s):(e.actions.push(this),e._scheduled||(e._scheduled=T.requestAnimationFrame((()=>e.flush(void 0)))))}recycleAsyncId(e,t,s=0){var r;if(null!=s?s>0:this.delay>0)return super.recycleAsyncId(e,t,s);const{actions:i}=e;null!=t&&(null===(r=i[i.length-1])||void 0===r?void 0:r.id)!==t&&(T.cancelAnimationFrame(t),e._scheduled=void 0)}});(class extends L{constructor(e=G,t=1/0){super(e,(()=>this.frame)),this.maxFrames=t,this.frame=0,this.index=-1}flush(){const{actions:e,maxFrames:t}=this;let s,r;for(;(r=e[0])&&r.delay<=t&&(e.shift(),this.frame=r.delay,!(s=r.execute(r.state,r.delay))););if(s){for(;r=e.shift();)r.unsubscribe();throw s}}}).frameTimeFactor=10;class G extends N{constructor(e,t,s=(e.index+=1)){super(e,t),this.scheduler=e,this.work=t,this.index=s,this.active=!0,this.index=e.index=s}schedule(e,t=0){if(Number.isFinite(t)){if(!this.id)return super.schedule(e,t);this.active=!1;const s=new G(this.scheduler,this.work);return this.add(s),s.schedule(e,t)}return i.EMPTY}requestAsyncId(e,t,s=0){this.delay=e.frame+s;const{actions:r}=e;return r.push(this),r.sort(G.sortActions),1}recycleAsyncId(e,t,s=0){}_execute(e,t){if(!0===this.active)return super._execute(e,t)}static sortActions(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1}}function H(e,t,s,r){return new(s||(s=Promise))((function(i,n){function o(e){try{h(r.next(e))}catch(e){n(e)}}function c(e){try{h(r.throw(e))}catch(e){n(e)}}function h(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,c)}h((r=r.apply(e,t||[])).next())}))}function J(e){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&e[t],r=0;if(s)return s.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(e){return this instanceof X?(this.v=e,this):new X(e)}function B(e,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=s.apply(e,t||[]),n=[];return r={},o("next"),o("throw"),o("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function o(e,t){i[e]&&(r[e]=function(t){return new Promise((function(s,r){n.push([e,t,s,r])>1||c(e,t)}))},t&&(r[e]=t(r[e])))}function c(e,t){try{(s=i[e](t)).value instanceof X?Promise.resolve(s.value.v).then(h,u):l(n[0][2],s)}catch(e){l(n[0][3],e)}var s}function h(e){c("next",e)}function u(e){c("throw",e)}function l(e,t){e(t),n.shift(),n.length&&c(n[0][0],n[0][1])}}function K(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,s=e[Symbol.asyncIterator];return s?s.call(e):(e=J(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=e[s]&&function(t){return new Promise((function(r,i){(function(e,t,s,r){Promise.resolve(r).then((function(t){e({value:t,done:s})}),t)})(r,i,(t=e[s](t)).done,t.value)}))}}}"function"==typeof SuppressedError&&SuppressedError;const Q=e=>e&&"number"==typeof e.length&&"function"!=typeof e;const W="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Z(t){if(t instanceof S)return t;if(null!=t){if(function(t){return e(t[_])}(t))return o=t,new S((t=>{const s=o[_]();if(e(s.subscribe))return s.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Q(t))return n=t,new S((e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()}));if(e(null==(i=t)?void 0:i.then))return r=t,new S((e=>{r.then((t=>{e.closed||(e.next(t),e.complete())}),(t=>e.error(t))).then(null,l)}));if(function(t){return Symbol.asyncIterator&&e(null==t?void 0:t[Symbol.asyncIterator])}(t))return ee(t);if(function(t){return e(null==t?void 0:t[W])}(t))return s=t,new S((e=>{for(const t of s)if(e.next(t),e.closed)return;e.complete()}));if(function(t){return e(null==t?void 0:t.getReader)}(t))return ee(function(e){return B(this,arguments,(function*(){const t=e.getReader();try{for(;;){const{value:e,done:s}=yield X(t.read());if(s)return yield X(void 0);yield yield X(e)}}finally{t.releaseLock()}}))}(t))}var s,r,i,n,o;throw function(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}(t)}function ee(e){return new S((t=>{(function(e,t){var s,r,i,n;return H(this,void 0,void 0,(function*(){try{for(s=K(e);!(r=yield s.next()).done;){const e=r.value;if(t.next(e),t.closed)return}}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&(yield n.call(s))}finally{if(i)throw i.error}}t.complete()}))})(e,t).catch((e=>t.error(e)))}))}var te;!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(te||(te={})),t((e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"})),t((e=>function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"})),t((e=>function(t){e(this),this.name="NotFoundError",this.message=t})),t((e=>function(t){e(this),this.name="SequenceError",this.message=t})),t((e=>function(t=null){e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}));class se extends Map{#e=0;#t=new Map;#s=new Map;#r;#i;#n;constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.#r=e.maxSize,this.#i=e.maxAge||Number.POSITIVE_INFINITY,this.#n=e.onEviction}get __oldCache(){return this.#s}#o(e){if("function"==typeof this.#n)for(const[t,s]of e)this.#n(t,s.value)}#c(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.#n&&this.#n(e,t.value),this.delete(e))}#h(e,t){if(!1===this.#c(e,t))return t.value}#u(e,t){return t.expiry?this.#h(e,t):t.value}#l(e,t){const s=t.get(e);return this.#u(e,s)}#a(e,t){this.#t.set(e,t),this.#e++,this.#e>=this.#r&&(this.#e=0,this.#o(this.#s),this.#s=this.#t,this.#t=new Map)}#d(e,t){this.#s.delete(e),this.#a(e,t)}*#f(){for(const e of this.#s){const[t,s]=e;if(!this.#t.has(t)){!1===this.#c(t,s)&&(yield e)}}for(const e of this.#t){const[t,s]=e;!1===this.#c(t,s)&&(yield e)}}get(e){if(this.#t.has(e)){const t=this.#t.get(e);return this.#u(e,t)}if(this.#s.has(e)){const t=this.#s.get(e);if(!1===this.#c(e,t))return this.#d(e,t),t.value}}set(e,t,{maxAge:s=this.#i}={}){const r="number"==typeof s&&s!==Number.POSITIVE_INFINITY?Date.now()+s:void 0;return this.#t.has(e)?this.#t.set(e,{value:t,expiry:r}):this.#a(e,{value:t,expiry:r}),this}has(e){return this.#t.has(e)?!this.#c(e,this.#t.get(e)):!!this.#s.has(e)&&!this.#c(e,this.#s.get(e))}peek(e){return this.#t.has(e)?this.#l(e,this.#t):this.#s.has(e)?this.#l(e,this.#s):void 0}delete(e){const t=this.#t.delete(e);return t&&this.#e--,this.#s.delete(e)||t}clear(){this.#t.clear(),this.#s.clear(),this.#e=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this.#f()],s=t.length-e;s<0?(this.#t=new Map(t),this.#s=new Map,this.#e=t.length):(s>0&&this.#o(t.slice(0,s)),this.#s=new Map(t.slice(s)),this.#t=new Map,this.#e=0),this.#r=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.#t){const[t,s]=e;!1===this.#c(t,s)&&(yield[t,s.value])}for(const e of this.#s){const[t,s]=e;if(!this.#t.has(t)){!1===this.#c(t,s)&&(yield[t,s.value])}}}*entriesDescending(){let e=[...this.#t];for(let t=e.length-1;t>=0;--t){const s=e[t],[r,i]=s;!1===this.#c(r,i)&&(yield[r,i.value])}e=[...this.#s];for(let t=e.length-1;t>=0;--t){const s=e[t],[r,i]=s;if(!this.#t.has(r)){!1===this.#c(r,i)&&(yield[r,i.value])}}}*entriesAscending(){for(const[e,t]of this.#f())yield[e,t.value]}get size(){if(!this.#e)return this.#s.size;let e=0;for(const t of this.#s.keys())this.#t.has(t)||e++;return Math.min(this.#e+e,this.#r)}get maxSize(){return this.#r}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[s,r]of this.entriesAscending())e.call(t,r,s,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}function re(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ie=ne;function ne(e,t){if(!(this instanceof ne))return new ne(e,t);this.proto=e,this.target=t,this.methods=[],this.getters=[],this.setters=[],this.fluents=[]}ne.prototype.method=function(e){var t=this.proto,s=this.target;return this.methods.push(e),t[e]=function(){return this[s][e].apply(this[s],arguments)},this},ne.prototype.access=function(e){return this.getter(e).setter(e)},ne.prototype.getter=function(e){var t=this.proto,s=this.target;return this.getters.push(e),t.__defineGetter__(e,(function(){return this[s][e]})),this},ne.prototype.setter=function(e){var t=this.proto,s=this.target;return this.setters.push(e),t.__defineSetter__(e,(function(t){return this[s][e]=t})),this},ne.prototype.fluent=function(e){var t=this.proto,s=this.target;return this.fluents.push(e),t[e]=function(t){return void 0!==t?(this[s][e]=t,this):this[s][e]},this};var oe=re(ie);class ce extends C{constructor(e={}){super();const{maxSize:t=Number.POSITIVE_INFINITY,maxAge:s=Number.POSITIVE_INFINITY,onEviction:r=new C}=e;this._cache=new se({maxSize:t,maxAge:s,onEviction(e,t){r.next(t)}}),oe(this,"_cache").getter("size").method("resize").method("delete").method("clear").method("entries").method("values").method("entriesAscending").method("entriesDescending"),this.onEviction=r}next(e){null!=e?(this._cache.set(e,e),super.next(e)):console.error("Cannot add undefined or null value to LRU cache")}subscribe(e){if(!("function"==typeof e||e&&"function"==typeof e.next))throw new TypeError("Invalid subscriber: Expected a function or an object with a `next` method");for(const[t]of this._cache.entriesDescending())("function"==typeof e?e:e.next).call(e,t);return super.subscribe(e)}}function he(e={}){return t=>{return s=()=>{const s=new ce(e);let r=0;const i=t.subscribe({next:e=>s.next(e),error:e=>{s.error(e),console.error("Error in source observable:",e)},complete:()=>s.complete()});return new S((e=>{r++;const t=s.subscribe(e);return()=>{try{t.unsubscribe(),r--,0===r&&i.unsubscribe()}catch(e){console.error("Error during cleanup:",e)}}}))},new S((e=>{Z(s()).subscribe(e)}));var s}}export{ce as LRUReplaySubject,he as shareLRUReplay};
